:root { --background-color: #242424; --text-color: #FFFFFF; --button-color: #3B3B3B; --button-hover-color: #888888; --card-background-color: #494141; --card-border-color: #333333; --nav-text-color: #AAAAAA; --placeholder-text-color: #CCCCCC; --font-family: 'Microsoft YaHei', 'Segoe UI', 'WenQuanYi Micro Hei', sans-serif; --label-start-r: 95; --label-start-g: 15; --label-start-b: 64; --label-end-r: 220; --label-end-g: 47; --label-end-b: 2; }
body { background-color: var(--background-color); color: var(--text-color); font-family: var(--font-family); margin: 0; padding: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
.header-container, .nav-frame { padding: 10px 20px; flex-shrink: 0; }
.header { display: flex; justify-content: space-between; align-items: center; }
.header-controls { display: flex; gap: 10px; align-items: center; }
.header-right-controls { display: flex; gap: 10px; align-items: center; position: relative; }
.button, input[type="text"], select { background-color: var(--button-color); color: var(--text-color); border: 1px solid var(--card-border-color); border-radius: 6px; padding: 8px 12px; font-size: 14px; cursor: pointer; transition: background-color 0.2s; }
.button:hover, select:hover { background-color: var(--button-hover-color); }
input[type="text"] { width: 300px; }
input[type="text"]::placeholder { color: var(--placeholder-text-color); }
select { -webkit-appearance: none; appearance: none; background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23%23AAAAAA%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22/%3E%3C/svg%3E'); background-repeat: no-repeat; background-position: right 12px center; background-size: 10px auto; padding-right: 30px; }
.nav-frame { color: var(--nav-text-color); font-size: 12px; padding-top: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.main-content { flex-grow: 1; overflow-y: auto; padding: 0 15px 15px 15px; }
#media-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(230px, 1fr)); gap: 12px; }
#media-container.jav-mode{ grid-template-columns: repeat(auto-fill, minmax(380px, 1fr)); }
.card { background-color: var(--card-background-color); border: 1px solid var(--card-border-color); border-radius: 8px; overflow: hidden; display: flex; flex-direction: column; }
.card-image-wrapper { width: 100%; background-color: #1E1E1E; display: flex; justify-content: center; align-items: center; color: var(--nav-text-color); font-size: 16px; text-align: center; padding: 10px; box-sizing: border-box; cursor: pointer; }
.manga-mode .card-image-wrapper, .novel-mode .card-image-wrapper, .other-mode .card-image-wrapper, .anime-mode .card-image-wrapper { aspect-ratio: 2 / 3; }
.music-mode .card-image-wrapper { aspect-ratio: 1 / 1; }
.jav-mode .card-image-wrapper { aspect-ratio: 800 / 538; }
.card-image-wrapper img { width: 100%; height: 100%; object-fit: cover; display: block; }
.card-info { padding: 8px 12px; flex-grow: 1; display: flex; flex-direction: column; gap: 8px; cursor: default; }
.card-filename { font-size: 14px; word-break: break-all; }
.card-tags { display: flex; flex-wrap: wrap; gap: 6px; min-height: 24px; }
.card-tag { font-size: 12px; padding: 2px 6px; border-radius: 5px; color: white; cursor: pointer; transition: transform 0.1s; }
.card-tag:hover { transform: scale(1.05); }
.tag-edit-unit { display: flex; align-items: center; background-color: #555; border-radius: 5px; }
.del-tag-btn { font-size: 12px; padding: 1px 5px; margin-left:2px; background-color: #C00000; color: white; border-radius: 0 5px 5px 0; cursor: pointer; }
.del-tag-btn:hover { background-color: red; }
.add-tag-btn { font-size: 14px; width: 22px; height: 22px; padding: 0; line-height:22px; text-align:center; background-color: #3B3B3B; cursor:pointer; border-radius:5px; }
.add-tag-btn:hover{ background-color: #888; }
.open-folder-btn { position: fixed; bottom: 20px; right: 20px; z-index: 50; }
#loading-indicator { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 24px; display: none; z-index: 2000; }
#maintenance-menu { display: none; position: absolute; top: 100%; right: 0; background-color: var(--card-background-color); border: 1px solid var(--card-border-color); border-radius: 6px; z-index: 100; padding: 5px; min-width: 120px; }
#maintenance-menu .button { width: 100%; text-align: left; margin-bottom: 5px; }
#maintenance-menu .button:last-child { margin-bottom: 0; }
.overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.9); display: none; justify-content: center; align-items: center; z-index: 1000; }
.overlay.active { display: flex; }
.overlay .close-btn { position: absolute; top: 26px; left: 80px; font-size: 34px; color: white; cursor: pointer; z-index: 1010; text-shadow: 0 0 5px black; line-height: 1;}
.overlay .close-btn:hover { color: #ff4d4d; }
#image-viewer { flex-direction: row; padding: 20px; box-sizing: border-box; }
#image-viewer .image-container { flex-grow: 1; display: flex; justify-content: center; align-items: center; height: 100%; padding: 0; }
#image-viewer .image-container img { max-width: 100%; max-height: 100%; object-fit: contain; opacity: 0; transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
#image-viewer .progress-bar { width: 70px; height: 100%; display: flex; flex-direction: column; justify-content: center; padding: 0; box-sizing: border-box; gap: 1px; cursor: pointer; }
.progress-segment-wrapper { display: flex; align-items: center; justify-content: flex-end; flex-grow: 1; }
.progress-label { width: 30px; font-size: 10px; color: #cccccc; text-align: right; padding-right: 5px; flex-shrink: 0; }
#image-viewer .progress-segment { flex-grow: 1; max-width: 15px; align-self: stretch; background-color: #555; border-radius: 2px; transition: background-color 0.2s; }
#image-viewer .progress-segment.active { background-color: #3B8ED0; }
#video-player video { max-width: 95vw; max-height: 95vh; outline: none; }
#fullscreen-btn { position: absolute; top: 25px; left: 30px; font-size: 28px; color: white; cursor: pointer; z-index: 1010; text-shadow: 0 0 5px black; }
#fullscreen-btn:hover { color: #87cefa; }
.add-tag-btn, .auto-import-btn { font-size: 14px; width: 22px; height: 22px; padding: 0; line-height:22px; text-align:center; background-color: #3B3B3B; cursor:pointer; border-radius:5px; display: inline-block; margin-left: 4px; vertical-align: middle; }
.add-tag-btn:hover, .auto-import-btn:hover { background-color: #888; }
.auto-import-btn[disabled] { cursor: not-allowed; background-color: #555; }
/* --- START: EPUB Viewer Style Overhaul --- */
#epub-viewer { flex-direction: column; justify-content: space-between; padding: 20px; box-sizing: border-box; height: 100vh; box-sizing: border-box; }
#epub-top-bar, #epub-bottom-bar { flex-shrink: 0; display: flex; align-items: center; width: 100%; padding: 10px 0; }
#epub-top-bar { justify-content: flex-start; }
#epub-bottom-bar { justify-content: center; gap: 15px; }
#epub-viewer .close-btn { position: static; font-size: 28px; line-height: 1; }
#epub-area-wrapper { flex-grow: 1; width: 100%; max-width: 900px; margin: 0 auto; overflow: hidden; display: flex; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
#epub-area { width: 100%; height: 100%; background-color: white; }
#prev-page-btn, #next-page-btn { font-size: 14px; padding: 8px 20px; }
/* --- NEW: Album View and Music Player Styles --- */
#album-view { flex-direction: row; align-items: flex-start; padding: 80px 40px 40px 40px; gap: 40px; background: linear-gradient(rgba(0,0,0,0.5), #121212 40%); }
#album-view .album-info { flex-shrink: 0; width: 300px; text-align: center; }
#album-view .album-art { width: 100%; aspect-ratio: 1 / 1; object-fit: cover; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.5); background-color: #333; }
#album-view .album-title { margin-top: 20px; font-size: 24px; font-weight: bold; }
#album-view .track-list-container { flex-grow: 1; height: calc(100vh - 220px); overflow-y: auto; }
#album-view .track-list { list-style: none; padding: 0; margin: 0; }
#album-view .track-item { display: flex; align-items: center; gap: 15px; padding: 12px; border-radius: 6px; cursor: pointer; transition: background-color 0.2s; }
#album-view .track-item:hover { background-color: rgba(255, 255, 255, 0.1); }
#album-view .track-item.playing { background-color: rgba(40, 150, 255, 0.2); color: #70b8ff; }
.track-number { font-size: 16px; color: #aaa; width: 25px; text-align: right; }
.track-title { font-size: 16px; }
#music-player-controls { position: fixed; bottom: 0; left: 0; width: 100%; height: 90px; background-color: #181818; border-top: 1px solid #282828; display: flex; justify-content: center; align-items: center; flex-direction: column; padding: 10px 0; box-sizing: border-box; z-index: 1020; }
.control-buttons { display: flex; align-items: center; gap: 20px; }
.control-button { background-color: transparent; border: 1px solid #555; border-radius: 5px; color: #b3b3b3; cursor: pointer; padding: 8px 16px; min-width: 90px; text-align: center; font-size: 14px; transition: color 0.2s, border-color 0.2s, background-color 0.2s; }
.control-button:hover { color: #fff; border-color: #888; }
.control-button.play-pause { font-size: 14px; min-width: 100px; }
.control-button.active { color: #1DB954; border-color: #1DB954; }
#current-audio-player { width: 80%; max-width: 700px; margin-top: 10px; }
/* --- NEW: Anime View Styles --- */
#anime-view { flex-direction: row; align-items: stretch; padding: 40px; gap: 20px; background: #181818; height: 100vh; box-sizing: border-box; }
.anime-player-container { flex-grow: 1; display: flex; flex-direction: column; min-width: 0; }
#anime-video-wrapper { flex-grow: 1; background-color: #000; display: flex; justify-content: center; align-items: center; border-radius: 8px; overflow: hidden; }
#current-anime-video { width: 100%; height: 100%; outline: none; }
#anime-controls-wrapper { flex-shrink: 0; padding-top: 15px; display: flex; gap: 10px; }
.episode-list-container { flex-shrink: 0; width: 200px; background-color: #121212; border-radius: 8px; padding: 10px; display: flex; flex-direction: column; max-height: calc(100% - 45px); }
#anime-title-text { margin: 0 0 15px 0; padding-bottom: 15px; border-bottom: 1px solid #282828; font-size: 20px; }
.episode-list { list-style: none; padding: 0; margin: 0; overflow-y: auto; flex-grow: 1; }
.episode-item { padding: 12px; border-radius: 6px; cursor: pointer; transition: background-color 0.2s; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.episode-item:hover { background-color: rgba(255, 255, 255, 0.1); }
.episode-item.playing { background-color: rgba(40, 150, 255, 0.2); color: #70b8ff; font-weight: bold; }
/* --- STATS PAGE CSS --- */
#stats-view .main-content { padding-top: 0; }
#stats-container { display: flex; flex-direction: column; gap: 2px; }
.stat-row { padding-bottom: 8px; }
.stat-label { font-size: 16px; font-weight: bold; word-break: break-all; margin-left: 5px; margin-bottom: 8px; }
.stat-bar-wrapper { display: flex; align-items: center; gap: 10px; }
.stat-bar-container { flex-grow: 1; }
.stat-bar { display: flex; height: 28px; background-color: #3a3a3a; border-radius: 5px; overflow: hidden; align-items: center; }
.stat-bar-segment { height: 100%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; overflow: hidden; transition: filter 0.2s; position: relative; }
.stat-bar-segment.expandable, .stat-bar-segment.clickable { cursor: pointer; }
.stat-bar-segment.expandable:hover, .stat-bar-segment.clickable:hover { filter: brightness(1.2); }
.segment-label { display: block; padding: 0 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-shadow: 1px 1px 2px rgba(0,0,0,0.8); }
.stat-total { font-size: 16px; font-weight: bold; min-width: 50px; text-align: right; }
.drilldown-row { padding-top: 10px; }